# config.py
from pathlib import Path
import sys

# Get the project root (where config.py lives)
BASE_DIR = Path(__file__).resolve().parent

# Add base dir to PYTHONPATH (for clean imports)
if str(BASE_DIR) not in sys.path:
    sys.path.append(str(BASE_DIR))

# Shared paths
DATA_DIR = BASE_DIR / "data"
DATA_DIR.mkdir(exist_ok=True)  # Ensure it exists

# Example files
SCRAPED_URLS_FILE = DATA_DIR / "services_by_category.json"
SCRAPED_SERVICES_FILE = DATA_DIR / "scraped_services_data.json"

# Output files for preprocessing
ENRICHED_SERVICES_FILE = DATA_DIR / "enriched_services_data.json"
DEPLOYMENT_SERVICES_FILE = DATA_DIR / "deployment_services.json"
VECTORIZER_FILE = DATA_DIR / "vectorizer.pkl"
SERVICES_MATRIX_FILE = DATA_DIR / "services_matrix.pkl"

# =================== Rule-based chatbot ============================
# Rule-based greetings/farewells
RESPONSE_RULES = {
    # --- Greetings ---
    "السلام عليكم": ["وعليكم السلام", "وعليكم السلام ورحمة الله وبركاته"],
    "سلام عليكم": ["وعليكم السلام", "وعليكم السلام ورحمة الله وبركاته"], # Common variation
    "اهلا": ["أهلاً بك!", "يا هلا!", "مرحباً بك، كيف يمكنني مساعدتك اليوم؟", "نورتنا"],
    "أهلا": ["أهلاً بك!", "يا هلا!", "مرحباً بك، كيف يمكنني مساعدتك اليوم؟", "نورتنا"], # With Alef Madda
    "مرحبا": ["أهلاً وسهلاً", "مرحباً بك!", "يا هلا فيك", "نورت"],
    "صباح الخير": ["صباح النور", "صباح الفل", "صباح الورد والياسمين"],
    "مساء الخير": ["مساء النور", "مساء الفل", "مساء الورد"],
    "نهارك سعيد": ["ونهارك أسعد بإذن الله", "يومك سعيد أيضاً"],
    "يا هلا": ["يا مرحب", "أهلين فيك"],
    "أهلا وسهلا": ["أهلاً بك", "يا مرحبا بك"], # As a key as well

    # --- Farewells ---
    "باي": ["مع السلامة", "في أمان الله", "إلى اللقاء", "نشوفك على خير"],
    "مع السلامة": ["في رعاية الله", "الله يسلمك، مع السلامة", "إلى اللقاء قريباً"],
    "سلام": ["مع السلامة", "في حفظ الرحمن"], # Common short farewell
    "اشوفك بعدين": ["إن شاء الله، مع السلامة", "في انتظارك"],
    "الى اللقاء": ["إلى لقاء قريب بإذن الله", "مع السلامة"],
    "في امان الله": ["في حفظه ورعايته", "الله معك"], # As a key

    # --- Pleasantries & Thanks ---
    "شكرا": ["على الرحب والسعة", "العفو", "لا شكر على واجب", "بكل سرور"],
    "شكرا جزيلا": ["العفو، هذا واجبي", "سعدت بمساعدتك"],
    "تسلم": ["الله يسلمك", "العفو"],
    "متشكر": ["العفو", "الشكر لله"],
    "الله يخليك": ["ويخليك يا رب", "تسلم"], # Can be a response to thanks
    "العفو": ["تسلم", "شكراً لك"], # If user says "العفو" first

    # --- Common Questions/Interactions ---
    "كيف حالك": ["الحمد لله بخير، شكراً لسؤالك. كيف يمكنني مساعدتك؟", "بخير، أتمنى أن تكون كذلك. تفضل."],
    "ازيك": ["تمام الحمد لله، وأنت؟ كيف أقدر أساعدك؟", "كويس، شكراً. أؤمرني؟"],
    "عامل ايه": ["كله تمام الحمد لله. أقدر أساعدك بإيه؟", "بخير، شكراً لك. تفضل بسؤالك."],
    "اخبارك ايه": ["الحمد لله كله تمام. كيف يمكنني خدمتك؟", "أخباري جيدة، شكراً. تفضل."],
    "تمام": ["الحمد لله", "عظيم!", "جيد جداً"], # Acknowledging user's "تمام"
    "ماشي": ["تمام", "حسناً", "بالتأكيد"],
    "اوكي": ["حسناً", "تمام", "موافق"],
    "ok": ["حسناً", "تمام", "موافق"], # Common English variation
    "حسنا": ["تمام", "بالتأكيد"],
    "لو سمحت": ["تفضل، أؤمرني", "أكيد، تحت أمرك"],
    "من فضلك": ["تفضل بسؤالك", "أنا في الخدمة"],
    "ممكن سؤال": ["بالتأكيد، تفضل بسؤالك.", "اسأل ما تشاء، أنا هنا للمساعدة."],
    "عندي سؤال": ["تفضل، كلي آذان صاغية.", "اطرح سؤالك، سأحاول المساعدة قدر الإمكان."],

    # --- About the Bot (Optional but good for rule-based) ---
    "مين انت": ["أنا نجيب، مساعدك الرقمي من بوابة مصر الرقمية.", "اسمي نجيب، كيف أقدر أساعدك؟"],
    "انت مين": ["أنا نجيب، مساعدك الرقمي.", "معك نجيب، للمساعدة في خدمات بوابة مصر الرقمية."],
    "اسمك ايه": ["اسمي نجيب.", "أنا نجيب، مساعدك الافتراضي."],
    "بتعمل ايه": ["أنا هنا لمساعدتك في العثور على معلومات وخدمات بوابة مصر الرقمية.", "وظيفتي هي إرشادك لخدمات الحكومة الرقمية."],
    "وظيفتك ايه": ["أساعدك في استكشاف خدمات بوابة مصر الرقمية والإجابة على استفساراتك المتعلقة بها.", "أنا دليلك لخدمات مصر الرقمية."],
    "ما هي خدماتك": ["يمكنني مساعدتك في البحث عن خدمات حكومية، معرفة شروطها، والوصول إليها عبر بوابة مصر الرقمية.", "أقدم معلومات حول الخدمات المتاحة على بوابة مصر الرقمية."],

    # --- Simple confirmations/negations (can be useful) ---
    "ايوه": ["تمام", "حسناً"],
    "نعم": ["تمام", "بالتأكيد"],
    "لا": ["حسناً", "مفهوم"],
    "صح": ["بالتأكيد", "صحيح"],
    "مضبوط": ["تماماً", "بالفعل"],
}


DEFAULT_RESPONSE = "عذراً، لم أفهم سؤالك."